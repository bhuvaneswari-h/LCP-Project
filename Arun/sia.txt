<!-- you can write html here -->
<!-- json data accessible through "response." then your key -->
<!-- use < %- response.key.value.content % > for rendering rich text editor content-->
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>


        <!-- Recent Sales -->
        <div class="col-12">
            <div class="card recent-sales overflow-auto">

                <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                        <li class="dropdown-header text-start">
                            <h6>Filter</h6>
                        </li>

                        <li><a class="dropdown-item" href="#">Today</a></li>
                        <li><a class="dropdown-item" href="#">This Month</a></li>
                        <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                </div>

                <div class="card-body">
                    <h5 class="card-title">Recent Activity <span>|</span></h5>

                    <table class="table table-borderless datatable">
                        <thead>
                            <tr>
                                <th scope="col">Part ID</th>
                                <th scope="col">Name</th>
                                <th scope="col">Current Location</th>
                                <th scope="col">Total Flying Hours</th>
                                <th scope="col">Status</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                           
                            <% response.Parts.value.forEach(function(project) { %>
                  <tr>
                    <td class="badge badge-pill badge-primary"><%= project["ID"] %></td>
                    <td><%= project["Part name"] %></td>
                    <td><%= project["Current Location"] %> </td>
                      <td><%= project["Flown"] %></td>
                      <td ><span id="badge"><%= project["Parts status"] %></td>
                        <!-- <td><%= project["Parts status"] %></td> -->
                       
                  </tr>
                  <% }); %>
                            
                        </tbody>
                    </table>

                </div>

            </div>
        </div><!-- End Recent Sales -->


          <!-- Top Selling -->
        <div class="col-12">
            <div class="card top-selling overflow-auto">

                <div class="filter">
                    <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                        <li class="dropdown-header text-start">
                            <h6>Filter</h6>
                        </li>

                        <li><a class="dropdown-item" href="#">Today</a></li>
                        <li><a class="dropdown-item" href="#">This Month</a></li>
                        <li><a class="dropdown-item" href="#">This Year</a></li>
                    </ul>
                </div>

                <div class="card-body pb-0">
                    <h5 class="card-title">Top Selling <span>| Today</span></h5>

                    <table class="table table-borderless">
                        <thead>
                            <tr>
                                <th scope="col">Preview</th>
                                <th scope="col">Product</th>
                                <th scope="col">Price</th>
                                <th scope="col">Sold</th>
                                <th scope="col">Revenue</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row"><a href="#"><img src="assets/img/product-1.jpg" alt=""></a></th>
                                <td><a href="#" class="text-primary fw-bold">Ut inventore ipsa voluptas nulla</a></td>
                                <td>$64</td>
                                <td class="fw-bold">124</td>
                                <td>$5,828</td>
                            </tr>
                            <tr>
                                <th scope="row"><a href="#"><img src="assets/img/product-2.jpg" alt=""></a></th>
                                <td><a href="#" class="text-primary fw-bold">Exercitationem similique doloremque</a>
                                </td>
                                <td>$46</td>
                                <td class="fw-bold">98</td>
                                <td>$4,508</td>
                            </tr>
                            <tr>
                                <th scope="row"><a href="#"><img src="assets/img/product-3.jpg" alt=""></a></th>
                                <td><a href="#" class="text-primary fw-bold">Doloribus nisi exercitationem</a></td>
                                <td>$59</td>
                                <td class="fw-bold">74</td>
                                <td>$4,366</td>
                            </tr>
                            <tr>
                                <th scope="row"><a href="#"><img src="assets/img/product-4.jpg" alt=""></a></th>
                                <td><a href="#" class="text-primary fw-bold">Officiis quaerat sint rerum error</a></td>
                                <td>$32</td>
                                <td class="fw-bold">63</td>
                                <td>$2,016</td>
                            </tr>
                            <tr>
                                <th scope="row"><a href="#"><img src="assets/img/product-5.jpg" alt=""></a></th>
                                <td><a href="#" class="text-primary fw-bold">Sit unde debitis delectus repellendus</a>
                                </td>
                                <td>$79</td>
                                <td class="fw-bold">41</td>
                                <td>$3,239</td>
                            </tr>
                        </tbody>
                    </table>

                </div>

            </div>
        </div><!-- End Top Selling -->


        
    </div>
</div><!-- End Left side columns -->


















const loadScript = (FILE_URL, async = true, type = "text/javascript", integrity = "", crossorigin = "") => {
  return new Promise((resolve, reject) => {
    try {
      const scriptEle = document.createElement("script");
      scriptEle.type = type;
      scriptEle.async = async;
      scriptEle.src = FILE_URL;

      if (integrity) {
        scriptEle.integrity = integrity;
      }

      if (crossorigin) {
        scriptEle.crossOrigin = crossorigin;
      }

      scriptEle.addEventListener("load", (ev) => {
        resolve({ status: true });
      });

      scriptEle.addEventListener("error", (ev) => {
        reject({
          status: false,
          message: `Failed to load the script ï¼„{FILE_URL}`
        });
      });

      document.body.appendChild(scriptEle);
    } catch (error) {
      reject(error);
    }
  });
};


loadScript("https://cdn.amcharts.com/lib/5/index.js")
  .then(data => {
    loadScript("https://cdn.amcharts.com/lib/5/map.js")
      .then(data => {
        loadScript("https://cdn.amcharts.com/lib/5/geodata/worldLow.js")
          .then(data => {
            loadScript("https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.49.1/apexcharts.min.js")
              .then((data) => {
                loadScript(
                  "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js",
                  true,
                  "text/javascript",
                  "sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz",
                  "anonymous"
                ).then((data) => {
                  loadChart();
                });
              });
          });
      });
  });

function loadChart() {
  //document.addEventListener("DOMContentLoaded", function() {

  var root = am5.Root.new("chartdiv");

  var chart = root.container.children.push(am5map.MapChart.new(root, {
    panX: "none",
    panY: "none",
    wheelY: "none",
    projection: am5map.geoEquirectangular()
  }));

  // Load world low detail GeoJSON data
  var worldSeries = chart.series.push(am5map.MapPolygonSeries.new(root, {
    geoJSON: am5geodata_worldLow,
    stroke: am5.color(0xcccccc),
    strokeWidth: 1,
    exclude: ["AQ"] // Exclude Antarctica
  }));

  // Add your country-wise data here
  var countryData = [
    { "id": "US", "value": 50 },
    { "id": "CN", "value": 80 },
    { "id": "IN", "value": 60 },
    { "id": "SG", "value": 70 },
    { "id": "JP", "value": 90 },
    { "id": "GB", "value": 65 },
    { "id": "BR", "value": 55 },
    { "id": "ZA", "value": 45 },
    { "id": "AU", "value": 75 }
  ];

  // Create a series to represent country data
  var countrySeries = chart.series.push(am5map.MapPolygonSeries.new(root, {
    geoJSON: am5geodata_worldLow,
    calculateAggregates: true,
    valueField: "value",
    fillField: "fill",
    exclude: ["AQ"] // Exclude Antarctica
  }));

  // Set the heat rules for coloring the countries
  countrySeries.set("heatRules", [{
    target: countrySeries.mapPolygons.template,
    dataField: "value",
    min: am5.color(0x90EE90), // Light green
    max: am5.color(0x006400), // Dark green
    key: "fill"
  }]);

  // Set the default fill color for world series
  worldSeries.mapPolygons.template.setAll({
    fill: am5.color(0x808080) // Grey color
  });

  countrySeries.mapPolygons.template.setAll({
    tooltipText: "[{id}] - {value}"
  });

  countrySeries.data.setAll(countryData);

  // Ensure that worldSeries is drawn first
  worldSeries.mapPolygons.template.set("zIndex", -1);

  //}); // end DOMContentLoaded
  /**************************************************** */

  new ApexCharts(document.querySelector("#reportsChart"), {
    series: [{
      name: 'Total Parts',
      data: [400, 440, 450, 450, 460, 500],
    }, {
      name: 'Requires Rotation',
      data: [80, 60, 50, 100, 80, 90]
    }, {
      name: 'In Maintainece',
      data: [15, 11, 32, 18, 9, 24]
    }],
    chart: {
      height: 350,
      type: 'area',
      toolbar: {
        show: false
      },
    },
    markers: {
      size: 4
    },
    colors: ['#4154f1', '#2eca6a', '#ff771d'],
    fill: {
      type: "gradient",
      gradient: {
        shadeIntensity: 1,
        opacityFrom: 0.3,
        opacityTo: 0.4,
        stops: [0, 90, 100]
      }
    },
    dataLabels: {
      enabled: false
    },
    stroke: {
      curve: 'smooth',
      width: 2
    },
    xaxis: {
      type: 'datetime',
      categories: ["2024-01-19T00:00:00.000Z", "2024-02-19T00:00:00.000Z", "2024-03-19T00:00:00.000Z", "2024-04-19T00:00:00.000Z", "2024-05-19T00:00:00.000Z", "2024-06-19T00:00:00.000Z"]
    },
    tooltip: {
      x: {
        format: 'dd/MM/yy HH:mm'
      },
    }
  }).render();



}















